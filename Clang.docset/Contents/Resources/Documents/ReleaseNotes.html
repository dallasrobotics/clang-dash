
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Clang 5.0.0 Release Notes &#8212; Clang 5 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" /> 
  </head>
  <body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 5 documentation</span></a></h1>
        <h2 class="heading"><span>Clang 5.0.0 Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="clang-5-0-0-release-notes">
<h1>Clang 5.0.0 Release Notes<a class="headerlink" href="#clang-5-0-0-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#what-s-new-in-clang-5-0-0" id="id4">What’s New in Clang 5.0.0?</a><ul>
<li><a class="reference internal" href="#major-new-features" id="id5">Major New Features</a></li>
<li><a class="reference internal" href="#new-compiler-flags" id="id6">New Compiler Flags</a></li>
<li><a class="reference internal" href="#deprecated-compiler-flags" id="id7">Deprecated Compiler Flags</a></li>
<li><a class="reference internal" href="#new-pragmas-in-clang" id="id8">New Pragmas in Clang</a></li>
<li><a class="reference internal" href="#attribute-changes-in-clang" id="id9">Attribute Changes in Clang</a></li>
<li><a class="reference internal" href="#c-language-changes-in-clang" id="id10">C Language Changes in Clang</a></li>
<li><a class="reference internal" href="#id1" id="id11">C++ Language Changes in Clang</a></li>
<li><a class="reference internal" href="#objective-c-language-changes-in-clang" id="id12">Objective-C Language Changes in Clang</a></li>
<li><a class="reference internal" href="#opencl-c-language-changes-in-clang" id="id13">OpenCL C Language Changes in Clang</a></li>
<li><a class="reference internal" href="#clang-format" id="id14">clang-format</a></li>
<li><a class="reference internal" href="#libclang" id="id15">libclang</a></li>
<li><a class="reference internal" href="#static-analyzer" id="id16">Static Analyzer</a></li>
<li><a class="reference internal" href="#undefined-behavior-sanitizer-ubsan" id="id17">Undefined Behavior Sanitizer (UBSan)</a></li>
<li><a class="reference internal" href="#python-binding-changes" id="id18">Python Binding Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-information" id="id19">Additional Information</a></li>
</ul>
</div>
<p>Written by the <a class="reference external" href="http://llvm.org/">LLVM Team</a></p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 5.0.0. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="http://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM
releases may be downloaded from the <a class="reference external" href="http://llvm.org/releases/">LLVM releases web
site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="http://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="http://llvm.org">LLVM Web Site</a>.</p>
</div>
<div class="section" id="what-s-new-in-clang-5-0-0">
<h2><a class="toc-backref" href="#id4">What’s New in Clang 5.0.0?</a><a class="headerlink" href="#what-s-new-in-clang-5-0-0" title="Permalink to this headline">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang’s support for those languages.</p>
<div class="section" id="major-new-features">
<h3><a class="toc-backref" href="#id5">Major New Features</a><a class="headerlink" href="#major-new-features" title="Permalink to this headline">¶</a></h3>
<div class="section" id="c-coroutines">
<h4>C++ coroutines<a class="headerlink" href="#c-coroutines" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4680.pdf">C++ coroutines TS</a>
implementation has landed. Use <code class="docutils literal"><span class="pre">-fcoroutines-ts</span> <span class="pre">-stdlib=libc++</span></code> to enable
coroutine support. Here is <a class="reference external" href="https://wandbox.org/permlink/Dth1IO5q8Oe31ew2">an example</a> to get you started.</p>
</div>
<div class="section" id="improvements-to-clang-s-diagnostics">
<h4>Improvements to Clang’s diagnostics<a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-Wcast-qual</span></code> was implemented for C++. C-style casts are now properly
diagnosed.</li>
<li><code class="docutils literal"><span class="pre">-Wunused-lambda-capture</span></code> warns when a variable explicitly captured
by a lambda is not used in the body of the lambda.</li>
<li><code class="docutils literal"><span class="pre">-Wstrict-prototypes</span></code> is a new warning that warns about non-prototype
function and block declarations and types in C and Objective-C.</li>
<li><code class="docutils literal"><span class="pre">-Wunguarded-availability</span></code> is a new warning that warns about uses of new
APIs that were introduced in a system whose version is newer than the
deployment target version. A new Objective-C expression <code class="docutils literal"><span class="pre">&#64;available</span></code> has
been introduced to perform system version checking at runtime. This warning
is off by default to prevent unexpected warnings in existing projects.
However, its less strict sibling <code class="docutils literal"><span class="pre">-Wunguarded-availability-new</span></code> is on by
default. It warns about unguarded uses of APIs only when they were introduced
in or after macOS 10.13, iOS 11, tvOS 11 or watchOS 4.</li>
<li>The <code class="docutils literal"><span class="pre">-Wdocumentation</span></code> warning now allows the use of <code class="docutils literal"><span class="pre">\param</span></code> and
<code class="docutils literal"><span class="pre">\returns</span></code> documentation directives in the documentation comments for
declarations with a function or a block pointer type.</li>
<li>The compiler no longer warns about unreachable <code class="docutils literal"><span class="pre">__builtin_unreachable</span></code>
statements.</li>
</ul>
</div>
</div>
<div class="section" id="new-compiler-flags">
<h3><a class="toc-backref" href="#id6">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">--autocomplete</span></code> was implemented to obtain a list of flags and its arguments.
This is used for shell autocompletion.</li>
</ul>
</div>
<div class="section" id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id7">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Permalink to this headline">¶</a></h3>
<p>The following options are deprecated and ignored. They will be removed in
future versions of Clang.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-fslp-vectorize-aggressive</span></code> used to enable the BB vectorizing pass. They have been superseeded
by the normal SLP vectorizer.</li>
<li><code class="docutils literal"><span class="pre">-fno-slp-vectorize-aggressive</span></code> used to be the default behavior of clang.</li>
</ul>
</div>
<div class="section" id="new-pragmas-in-clang">
<h3><a class="toc-backref" href="#id8">New Pragmas in Clang</a><a class="headerlink" href="#new-pragmas-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Clang now supports the <code class="docutils literal"><span class="pre">clang</span> <span class="pre">attribute</span></code> pragma that allows users to apply
an attribute to multiple declarations.</li>
<li><code class="docutils literal"><span class="pre">pragma</span> <span class="pre">pack</span></code> directives that are included in a precompiled header are now
applied correctly to the declarations in the compilation unit that includes
that precompiled header.</li>
</ul>
</div>
<div class="section" id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id9">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">overloadable</span></code> attribute now allows at most one function with a given
name to lack the <code class="docutils literal"><span class="pre">overloadable</span></code> attribute. This unmarked function will not
have its name mangled.</li>
<li>The <code class="docutils literal"><span class="pre">ms_abi</span></code> attribute and the <code class="docutils literal"><span class="pre">__builtin_ms_va_list</span></code> types and builtins
are now supported on AArch64.</li>
</ul>
</div>
<div class="section" id="c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id10">C Language Changes in Clang</a><a class="headerlink" href="#c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added near complete support for implicit scalar to vector conversion, a GNU
C/C++ language extension. With this extension, the following code is
considered valid:</li>
</ul>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="n">v4i32</span> <span class="nf">__attribute__</span><span class="p">((</span><span class="n">vector_size</span><span class="p">(</span><span class="mi">16</span><span class="p">)));</span>

<span class="n">v4i32</span> <span class="nf">foo</span><span class="p">(</span><span class="n">v4i32</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Here 5 is implicitly casted to an unsigned value and replicated into a</span>
  <span class="c1">// vector with as many elements as &#39;a&#39;.</span>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The implicit conversion of a scalar value to a vector value–in the context of
a vector expression–occurs when:</p>
<ul class="simple">
<li>The type of the vector is that of a <code class="docutils literal"><span class="pre">__attribute__((vector_size(size)))</span></code>
vector, not an OpenCL <code class="docutils literal"><span class="pre">__attribute__((ext_vector_type(size)))</span></code> vector type.</li>
<li>The scalar value can be casted to that of the vector element’s type without
the loss of precision based on the type of the scalar and the type of the
vector’s elements.</li>
<li>For compile time constant values, the above rule is weakened to consider the
value of the scalar constant rather than the constant’s type. However,
for compatibility with GCC, floating point constants with precise integral
representations are not implicitly converted to integer values.</li>
</ul>
<p>Currently the basic integer and floating point types with the following
operators are supported: <code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">/</span></code>, <code class="docutils literal"><span class="pre">-</span></code>, <code class="docutils literal"><span class="pre">*</span></code>, <code class="docutils literal"><span class="pre">%</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>,
<code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">&amp;</span></code>, <code class="docutils literal"><span class="pre">|</span></code>, <code class="docutils literal"><span class="pre">^</span></code> and the corresponding
assignment operators where applicable.</p>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id11">C++ Language Changes in Clang</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We expect this to be the last Clang release that defaults to <code class="docutils literal"><span class="pre">-std=gnu++98</span></code>
when using the GCC-compatible <code class="docutils literal"><span class="pre">clang++</span></code> driver. From Clang 6 onwards we
expect to use <code class="docutils literal"><span class="pre">-std=gnu++14</span></code> or a later standard by default, to match the
behavior of recent GCC releases. Users are encouraged to change their build
files to explicitly specify their desired C++ standard.</li>
<li>Support for the C++17 standard has been completed. This mode can be enabled
using <code class="docutils literal"><span class="pre">-std=c++17</span></code> (the old flag <code class="docutils literal"><span class="pre">-std=c++1z</span></code> is still supported for
compatibility).</li>
<li>When targeting a platform that uses the Itanium C++ ABI, Clang implements a
<a class="reference external" href="https://github.com/itanium-cxx-abi/cxx-abi/commit/7099637aba11fed6bdad7ee65bf4fd3f97fbf076">recent change to the ABI</a> that passes objects of class type indirectly if they
have a non-trivial move constructor. Previous versions of Clang only
considered the copy constructor, resulting in an ABI change in rare cases,
but GCC has already implemented this change for several releases.
This affects all targets other than Windows and PS4. You can opt out of this
ABI change with <code class="docutils literal"><span class="pre">-fclang-abi-compat=4.0</span></code>.</li>
<li>As mentioned in <a class="reference internal" href="#c-language-changes-in-clang">C Language Changes in Clang</a>, Clang’s support for
implicit scalar to vector conversions also applies to C++. Additionally
the following operators are also supported: <code class="docutils literal"><span class="pre">&amp;&amp;</span></code> and <code class="docutils literal"><span class="pre">||</span></code>.</li>
</ul>
</div>
<div class="section" id="objective-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id12">Objective-C Language Changes in Clang</a><a class="headerlink" href="#objective-c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Clang now guarantees that a <code class="docutils literal"><span class="pre">readwrite</span></code> property is synthesized when an
ambiguous property (i.e. a property that’s declared in multiple protocols)
is synthesized. The <code class="docutils literal"><span class="pre">-Wprotocol-property-synthesis-ambiguity</span></code> warning that
warns about incompatible property types is now promoted to an error when
there’s an ambiguity between <code class="docutils literal"><span class="pre">readwrite</span></code> and <code class="docutils literal"><span class="pre">readonly</span></code> properties.</li>
<li>Clang now prohibits synthesis of ambiguous properties with incompatible
explicit property attributes. The following property attributes are
checked for differences: <code class="docutils literal"><span class="pre">copy</span></code>, <code class="docutils literal"><span class="pre">retain</span></code>/<code class="docutils literal"><span class="pre">strong</span></code>, <code class="docutils literal"><span class="pre">atomic</span></code>,
<code class="docutils literal"><span class="pre">getter</span></code> and <code class="docutils literal"><span class="pre">setter</span></code>.</li>
</ul>
</div>
<div class="section" id="opencl-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id13">OpenCL C Language Changes in Clang</a><a class="headerlink" href="#opencl-c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<p>Various bug fixes and improvements:</p>
<ul class="simple">
<li>Extended OpenCL-related Clang tests.</li>
<li>Improved diagnostics across several areas: scoped address space
qualified variables, function pointers, atomics, type rank for overloading,
block captures, <code class="docutils literal"><span class="pre">reserve_id_t</span></code>.</li>
<li>Several address space related fixes for constant address space function scope variables,
IR generation, mangling of <code class="docutils literal"><span class="pre">generic</span></code> and alloca (post-fix from general Clang
refactoring of address spaces).</li>
<li>Several improvements in extensions: fixed OpenCL version for <code class="docutils literal"><span class="pre">cl_khr_mipmap_image</span></code>,
added missing <code class="docutils literal"><span class="pre">cl_khr_3d_image_writes</span></code>.</li>
<li>Improvements in <code class="docutils literal"><span class="pre">enqueue_kernel</span></code>, especially the implementation of <code class="docutils literal"><span class="pre">ndrange_t</span></code> and blocks.</li>
<li>OpenCL type related fixes: global samplers, the <code class="docutils literal"><span class="pre">pipe_t</span></code> size, internal type redefinition,
and type compatibility checking in ternary and other operations.</li>
<li>The OpenCL header has been extended with missing extension guards, and direct mapping of <code class="docutils literal"><span class="pre">as_type</span></code>
to <code class="docutils literal"><span class="pre">__builtin_astype</span></code>.</li>
<li>Fixed <code class="docutils literal"><span class="pre">kernel_arg_type_qual</span></code> and OpenCL/SPIR version in metadata.</li>
<li>Added proper use of the kernel calling convention to various targets.</li>
</ul>
<p>The following new functionalities have been added:</p>
<ul class="simple">
<li>Added documentation on OpenCL to Clang user manual.</li>
<li>Extended Clang builtins with required <code class="docutils literal"><span class="pre">cl_khr_subgroups</span></code> support.</li>
<li>Add <code class="docutils literal"><span class="pre">intel_reqd_sub_group_size</span></code> attribute support.</li>
<li>Added OpenCL types to <code class="docutils literal"><span class="pre">CIndex</span></code>.</li>
</ul>
</div>
<div class="section" id="clang-format">
<h3><a class="toc-backref" href="#id14">clang-format</a><a class="headerlink" href="#clang-format" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Option <strong>BreakBeforeInheritanceComma</strong> added to break before <code class="docutils literal"><span class="pre">:</span></code> and <code class="docutils literal"><span class="pre">,</span></code>  in case of
multiple inheritance in a class declaration. Enabled by default in the Mozilla coding style.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">true</th>
<th class="head">false</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span>
    <span class="o">:</span> <span class="k">public</span> <span class="n">X</span>
    <span class="p">,</span> <span class="k">public</span> <span class="n">Y</span> <span class="p">{</span>
<span class="p">};</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span> <span class="o">:</span> <span class="k">public</span> <span class="n">X</span><span class="p">,</span> <span class="k">public</span> <span class="n">Y</span> <span class="p">{</span>
<span class="p">};</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Align block comment decorations.</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Before</th>
<th class="head">After</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="cm">/* line 1</span>
<span class="cm">  * line 2</span>
<span class="cm"> */</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="cm">/* line 1</span>
<span class="cm"> * line 2</span>
<span class="cm"> */</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">The <a class="reference internal" href="ClangFormatStyleOptions.html"><span class="doc">Clang-Format Style Options</span></a> documentation provides detailed examples for most options.</p>
</li>
<li><p class="first">Namespace end comments are now added or updated automatically.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Before</th>
<th class="head">After</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">A</span> <span class="p">{</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">A</span> <span class="p">{</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// namespace A</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Comment reflow support added. Overly long comment lines will now be reflown with the rest of
the paragraph instead of just broken. Option <strong>ReflowComments</strong> added and enabled by default.</p>
</li>
</ul>
</div>
<div class="section" id="libclang">
<h3><a class="toc-backref" href="#id15">libclang</a><a class="headerlink" href="#libclang" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Libclang now provides code-completion results for more C++ constructs
and keywords. The following keywords/identifiers are now included in the
code-completion results: <code class="docutils literal"><span class="pre">static_assert</span></code>, <code class="docutils literal"><span class="pre">alignas</span></code>, <code class="docutils literal"><span class="pre">constexpr</span></code>,
<code class="docutils literal"><span class="pre">final</span></code>, <code class="docutils literal"><span class="pre">noexcept</span></code>, <code class="docutils literal"><span class="pre">override</span></code> and <code class="docutils literal"><span class="pre">thread_local</span></code>.</p>
</li>
<li><p class="first">Libclang now provides code-completion results for members from dependent
classes. For example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">appendValue</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">dest</span><span class="p">.</span> <span class="c1">// Relevant completion results are now shown after &#39;.&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that code-completion results are still not provided when the member
expression includes a dependent base expression. For example:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">appendValue</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">dest</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span> <span class="c1">// Libclang fails to provide completion results after &#39;.&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="static-analyzer">
<h3><a class="toc-backref" href="#id16">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The static analyzer now supports using the
<a class="reference external" href="https://github.com/z3prover/z3">z3 theorem prover</a> from Microsoft Research
as an external constraint solver. This allows reasoning over more complex
queries, but performance is ~15x slower than the default range-based
constraint solver. To enable the z3 solver backend, clang must be built with
the <code class="docutils literal"><span class="pre">CLANG_ANALYZER_BUILD_Z3=ON</span></code> option, and the
<code class="docutils literal"><span class="pre">-Xanalyzer</span> <span class="pre">-analyzer-constraints=z3</span></code> arguments passed at runtime.</li>
</ul>
</div>
<div class="section" id="undefined-behavior-sanitizer-ubsan">
<h3><a class="toc-backref" href="#id17">Undefined Behavior Sanitizer (UBSan)</a><a class="headerlink" href="#undefined-behavior-sanitizer-ubsan" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The Undefined Behavior Sanitizer has a new check for pointer overflow. This
check is on by default. The flag to control this functionality is
<code class="docutils literal"><span class="pre">-fsanitize=pointer-overflow</span></code>.</p>
<p>Pointer overflow is an indicator of undefined behavior: when a pointer
indexing expression wraps around the address space, or produces other
unexpected results, its result may not point to a valid object.</p>
</li>
<li><p class="first">UBSan has several new checks which detect violations of nullability
annotations. These checks are off by default. The flag to control this group
of checks is <code class="docutils literal"><span class="pre">-fsanitize=nullability</span></code>. The checks can be individially enabled
by <code class="docutils literal"><span class="pre">-fsanitize=nullability-arg</span></code> (which checks calls),
<code class="docutils literal"><span class="pre">-fsanitize=nullability-assign</span></code> (which checks assignments), and
<code class="docutils literal"><span class="pre">-fsanitize=nullability-return</span></code> (which checks return statements).</p>
</li>
<li><p class="first">UBSan can now detect invalid loads from bitfields and from ObjC BOOLs.</p>
</li>
<li><p class="first">UBSan can now avoid emitting unnecessary type checks in C++ class methods and
in several other cases where the result is known at compile-time. UBSan can
also avoid emitting unnecessary overflow checks in arithmetic expressions
with promoted integer operands.</p>
</li>
</ul>
</div>
<div class="section" id="python-binding-changes">
<h3><a class="toc-backref" href="#id18">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Permalink to this headline">¶</a></h3>
<p>Python bindings now support both Python 2 and Python 3.</p>
<p>The following methods have been added:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">is_scoped_enum</span></code> has been added to <code class="docutils literal"><span class="pre">Cursor</span></code>.</li>
<li><code class="docutils literal"><span class="pre">exception_specification_kind</span></code> has been added to <code class="docutils literal"><span class="pre">Cursor</span></code>.</li>
<li><code class="docutils literal"><span class="pre">get_address_space</span></code> has been added to <code class="docutils literal"><span class="pre">Type</span></code>.</li>
<li><code class="docutils literal"><span class="pre">get_typedef_name</span></code> has been added to <code class="docutils literal"><span class="pre">Type</span></code>.</li>
<li><code class="docutils literal"><span class="pre">get_exception_specification_kind</span></code> has been added to <code class="docutils literal"><span class="pre">Type</span></code>.</li>
</ul>
</div>
</div>
<div class="section" id="additional-information">
<h2><a class="toc-backref" href="#id19">Additional Information</a><a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="http://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Subversion version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us via the <a class="reference external" href="http://lists.llvm.org/mailman/listinfo/cfe-dev">mailing
list</a>.</p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2017, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>